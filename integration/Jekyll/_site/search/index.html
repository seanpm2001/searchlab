<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Searchlab Search | Your awesome title</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Searchlab Search" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/search/" />
<meta property="og:url" content="http://localhost:4000/search/" />
<meta property="og:site_name" content="Your awesome title" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Searchlab Search" />
<script type="application/ld+json">
{"url":"http://localhost:4000/search/","headline":"Searchlab Search","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Your awesome title" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Your awesome title</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/search/">Searchlab Search</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Searchlab Search</h1>
  </header>

  <div class="post-content">
    <script>
    // modify this according to the location of your elasticsearch instance
    var search_api = "http://wip.searchlab.eu/api/yacysearch.json";
</script>

<!-- CSS (C) MIT License by Arham Jain from https://github.com/ajusa/lit.git, slightly modified -->
<style>
    :root { --font: Arial; --primary-color: #2B3E50; --light: #f5f5f5; }
    * { box-sizing: border-box; } *+* { margin: .5em 0; } pre { overflow: auto }
    @media(min-width:35em) {
     .col { display: table-cell; } .row { display: table; border-spacing: 1em 0; }
     .\31 { width: 5%; }  .\32 { width: 15%; } .\33 { width: 22%; } .\34 { width: 30%; } .\35 { width: 40%; } .\36 { width: 50%; }
    }
    .w-100, .row { width: 100%; } .w-75, .row { width: 75%; } a:hover, .btn:hover { opacity: .6; }
    .card:focus, hr { outline: 0; border: solid var(--primary-color); }
    .card, pre { padding: 1em; border: solid var(--light); }
    .c { max-width: 60em; padding: 1em; margin: auto; font: 1em/1.6 var(--font); }
    h1 { font: 100 2.5em var(--font); } h2 { font: 100 2.2em var(--font); } h3 { font: 100 2em var(--font); }
    h4 { font: 100 1.5em var(--font); } h5 { font: 100 1.2em var(--font); } h6 { font: 100 1em var(--font); }
    a { color: var(--primary-color); text-decoration: none; }
    .btn.primary { color: white; background: var(--primary-color); border: solid var(--primary-color); }
    td, th { padding: 1em; text-align: left; border-bottom: solid var(--light); }
    .btn { padding: 1em; text-transform: uppercase; background: white; border: solid; font: .7em var(--font); }
</style>

<script>
    // t.min.js from https://github.com/jasonmoo/t.js (C) MIT License by Jason Mooberry 
    (function(){function c(a){this.t=a}function l(a,b){for(var e=b.split(".");e.length;){if(!(e[0]in a))return!1;a=a[e.shift()]}return a}function d(a,b){return a.replace(h,function(e,a,i,f,c,h,k,m){var f=l(b,f),j="",g;if(!f)return"!"==i?d(c,b):k?d(m,b):"";if(!i)return d(h,b);if("@"==i){e=b._key;a=b._val;for(g in f)f.hasOwnProperty(g)&&(b._key=g,b._val=f[g],j+=d(c,b));b._key=e;b._val=a;return j}}).replace(k,function(a,c,d){return(a=l(b,d))||0===a?"%"==c?(new Option(a)).innerHTML.replace(/"/g,"&quot;"):
    a:""})}var h=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,k=/\{\{([=%])(.+?)\}\}/g;c.prototype.render=function(a){return d(this.t,a)};window.t=c})();
</script>

<div class="c">
    <h1>Searchlab&nbsp;/ Search&nbsp;Template</h1>

    <div class="row">
        <input type="text" name="query" id="query" class="card w-75" autofocus="autofocus" onfocus="this.select()" onclick="document.getElementById('startRecord').value=0;document.getElementById('query').value='';" />&nbsp;
        <input type="hidden" name="startRecord" id="startRecord" value="0" />
        <button id="search" onclick="return getapi()" class="btn primary">search</button>
    </div>

    <!-- template for result list used by t.js -->
    <script type="t/template" id="resulttemplate">
        
        
        <div class="panel panel-default">
            <h4 class="panel-title"><a href="" target="_blank"></a></h4>
            <p></p>
            <p><a href="" target="_blank"></a><br></p>
        </div>
        
    </script>
    <div id="result"></div>

    <!-- template for pagination bar used by t.js -->
    <script type="t/template" id="paginationtemplate">
        <div class="btn-group" role="group" aria-label="pagination">
            
                <button type="button" class="btn primary btn-xs" onClick="document.getElementById('startRecord').value=; getapi();"></button>
            
        </div>
    </script>
    <div id="pagination"></div>
    <a href="http://searchlab.eu">Get a personalized search from searchlab.eu</a>
</div>

<script>
    // XHR request to evaluate search request
    function getapi() {
        const query = document.querySelector('#query').value;
        const startRecord = parseInt(document.querySelector('#startRecord').value); // starts at 0
        const xhr = new XMLHttpRequest();
        xhr.open('GET', search_api + '?startRecord=' + startRecord + '&query=' + query);
        xhr.setRequestHeader('Content-type', 'application/json');
        xhr.responseType = 'json';
        xhr.send();
        xhr.onload = function() {
            var channel = xhr.response.channels[0];
            var pages = Math.floor(channel.totalResults / channel.itemsPerPage) + 1;
            channel["results"] = channel.totalResults == 0 ? "" : "<p>" + channel.totalResults + " hits, page " + (Math.floor(startRecord / channel.itemsPerPage) + 1) + " of " + pages + "</p>";
            // result list 
            document.getElementById("result").innerHTML = new t(document.getElementById('resulttemplate').innerHTML).render(channel);
            // page navigation
            document.getElementById("pagination").innerHTML = new t(document.getElementById('paginationtemplate').innerHTML).render({"items": channel.pagenav});
        }
    }
    // event listener on query field to trigger search button when enter is hit
    var input = document.getElementById("query");
    input.addEventListener("keyup", function(event) {if (event.keyCode === 13) {return getapi();}});
</script>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Your awesome title</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Your awesome title</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
